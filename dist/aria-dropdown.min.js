!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery,window,document)}(function(e,t,n){"use strict";function a(e,t,n){return e.is("[id]")||e.attr("id",t+n),e.attr("id")}function s(e,t){for(var n=[];"BODY"!==e[0].tagName;)(e=e.parent()).data(t)&&n.push(e);return n}function i(e,t){for(;"BODY"!==e[0].tagName&&void 0===e.data(t);)e=e.parent();for(var n=e.find("*"),a=n.length,s=[],i=0;i<a;i++){var d=n.eq(i);void 0!==d.data(t)&&s.push(d)}return s}function d(e,t){return t-e<300}function o(t,n){var a=this;a.settings=e.extend({},e.fn[l].defaultSettings,n),a.element=e(t),a.btn=a.element.find("> ."+a.settings.btnClass).first(),a.menu=a.element.find("> ."+a.settings.menuClass).first(),a.elementStatus=!1,a.mouse=!1,a.init()}var l="ariaDropdown",r={aCs:"aria-controls",aHi:"aria-hidden",aOw:"aria-owns",aEx:"aria-expanded",aHp:"aria-haspopup",zIn:"z-index",t:"true",f:"false",dCl:"data-ariadropdown-collapselabel",dEl:"data-ariadropdown-expandlabel"},u=0,p=e(t);e.extend(o.prototype,{init:function(){var t=this,n=t.settings,o=t.menu,c=t.btn,m=t.element,g=n.dynamicBtnLabel;t.btnId=a(t.btn,"dropdown__btn--",u),t.menuId=a(t.menu,"dropdown__menu--",u),o.attr(r.aHi,r.t).attr(r.aOw,t.btnId),c.attr(r.aHp,r.t).attr(r.aCs,t.menuId),t.slideUp(!1);var f=0;p.on("touchstart."+l,function(){f=new Date,e("#touch").show().fadeOut(900)}),t.settings.collapseOnOutsideClick?p.on("click."+l+" touchend."+l,function(e){"touchend"===e.type&&d(new Date,f)?p.trigger("click."+l):t.elementStatus&&t.slideUp(!0)}):p.on("click."+l+" touchend."+l,function(){if("touchend"===event.type&&d(new Date,f))p.trigger("click."+l);else{var e=s(t.element,"plugin_"+l),n=e.length,a=0,i=!1;if(n>0){for(;a<n&&!i;)e[a].data("plugin_"+l).settings.collapseOnOutsideClick&&(i=!0),a++;i&&t.slideUp(!0)}}}),m.on("click."+l,function(n){t.mouse||t.toggle(!0),n.stopPropagation();for(var a=i(e(n.target),"plugin_"+l),s=a.length,d={},o=0;o<s;o++)(d=a[o].data("plugin_"+l)).elementStatus&&d.slideUp(!0)}),n.collapseOnMenuClick||o.on("click."+l+" touchend."+l,function(e){"touchend"===e.type&&d(new Date,f)||e.stopPropagation()}),n.expandOnlyOne&&p.on(l+".slideDown",function(e,n){for(var a=i(m,"plugin_"+l),s=a.length,d=!1,o=0;!d&&o<s;)n===a[o].data("plugin_"+l)&&(d=!0),o++;n!==m&&!d&&t.elementStatus&&t.slideUp(!0)}),n.mouse&&(m.on("mouseenter."+l+" touchend."+l,function(e){"touchend"!==e.type?(t.mouse=!0,t.elementStatus||t.slideDown(!0)):t.mouse=!1}),m.on("mouseleave."+l,function(e){t.mouse=!1,t.elementStatus&&t.slideUp(!0)})),g&&(t.dynamicBtnEl="string"==typeof g?c.find(g):c,t.collapseLabel=c.attr(r.dCl),t.expandLabel=c.attr(r.dEl)),p.trigger(l+".initialised",[t]),u+=1},toggle:function(){var e=this;e.elementStatus?e.slideUp(!0):e.slideDown(!0)},collapse:function(){var e=this,t=e.settings;e.element.removeClass(t.dropdownExpandedClass),e.btn.removeClass(t.btnExpandedClass).attr(r.aEx,r.f),e.menu.removeClass(t.menuExpandedClass).attr(r.aHi,r.t),e.dynamicBtnEl&&e.dynamicBtnEl.text(e.expandLabel),e.elementStatus=!1},expand:function(){var e=this,t=e.settings;e.element.addClass(t.dropdownExpandedClass),e.btn.addClass(t.btnExpandedClass).attr(r.aEx,r.t),e.menu.addClass(t.menuExpandedClass).attr(r.aHi,r.f),e.dynamicBtnEl&&e.dynamicBtnEl.text(e.collapseLabel),e.elementStatus=!0},slideDown:function(e){var t=this,n=e?t.settings.slideSpeed:0;t.settings.cssTransitions||(t.element.css(r.zIn,t.settings.expandZIndex),t.menu.stop().slideDown(n,t.settings.easing)),p.trigger(l+".slideDown",[t]),t.expand()},slideUp:function(e){var t=this,n=e?t.settings.slideSpeed:0;t.settings.cssTransitions||(t.element.css(r.zIn,t.settings.collapseZIndex),t.menu.stop().slideUp(n,t.settings.easing)),p.trigger(l+".slideUp",[t]),t.collapse()},destroy:function(){var e=this,t=e.settings;e.btn.removeAttr(r.aHp).removeAttr(r.aCs).removeAttr(r.aEx).removeClass(t.btnExpandedClass),e.menu.removeAttr(r.aOw).removeAttr(r.aHi).removeClass(t.menuExpandedClass).off("click."+l),e.element.removeClass(t.dropdownExpandedClass).off("click."+l+" mouseenter."+l+" mouseleave."+l).removeData("plugin_"+l),p.trigger(l+".destroyed",[e])},methodCaller:function(e){var t=this;switch(e){case"toggle":t.toggle(!0);break;case"slideDown":t.elementStatus||t.slideDown(!0);break;case"slideUp":t.elementStatus&&t.slideUp(!0);break;case"destroy":t.destroy()}}}),e.fn[l]=function(t){return this.each(function(){var n=this;e.data(n,"plugin_"+l)||"object"!=typeof t&&void 0!==t?"string"==typeof t&&e.data(n,"plugin_"+l).methodCaller(t):e.data(n,"plugin_"+l,new o(n,t))})},e.fn[l].defaultSettings={btnClass:"dropdown__btn",menuClass:"dropdown__menu",dropdownExpandedClass:"dropdown_expanded",btnExpandedClass:"dropdown__btn_expanded",menuExpandedClass:"dropdown__menu_expanded",slideSpeed:300,easing:"swing",collapseOnOutsideClick:!0,collapseOnMenuClick:!1,expandOnlyOne:!0,expandZIndex:10,collapseZIndex:1,cssTransitions:!1,mouse:!1,dynamicBtnLabel:!1}});