!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery,window)}(function(i,e){"use strict";var l="ariaDropdown",a="aria-controls",r="aria-hidden",p="aria-owns",t="aria-expanded",u="aria-haspopup",s="z-index",c="true",d="false",m="data-ariadropdown-collapselabel",g="data-ariadropdown-expandlabel",f=0,x=i(e);function v(e,n,t){return e.is("[id]")||e.attr("id",n+t),e.attr("id")}function C(e,n){for(;"BODY"!==e[0].tagName&&void 0===e.data(n);)e=e.parent();for(var t=e.find("*"),s=t.length,a=[],i=0;i<s;i++){var d=t.eq(i);void 0!==d.data(n)&&a.push(d)}return a}function n(e,n){var t=this;t.settings=i.extend({},i.fn[l].defaultSettings,n),t.element=i(e),t.btn=t.element.find("> ."+t.settings.btnClass).first(),t.menu=t.element.find("> ."+t.settings.menuClass).first(),t.elementStatus=!1,t.mouse=!1,t.init()}i.extend(n.prototype,{init:function(){var d=this,e=d.settings,n=d.menu,t=d.btn,o=d.element,s=e.dynamicBtnLabel;d.btnId=v(d.btn,"dropdown__btn--",f),d.menuId=v(d.menu,"dropdown__menu--",f),n.attr(r,c).attr(p,d.btnId),t.attr(u,c).attr(a,d.menuId),d.slideUp(!1),d.settings.collapseOnOutsideClick?x.on("click."+l,function(e){d.elementStatus&&d.slideUp(!0)}):x.on("click."+l,function(){var e=function(e,n){for(var t=[];"BODY"!==e[0].tagName;)(e=e.parent()).data(n)&&t.push(e);return t}(d.element,"plugin_"+l),n=e.length,t=0,s=!1;if(0<n){for(;t<n&&!s;)e[t].data("plugin_"+l).settings.collapseOnOutsideClick&&(s=!0),t++;s&&d.slideUp(!0)}}),o.on("click."+l,function(e){d.mouse||d.toggle(!0),e.stopPropagation();for(var n=C(i(e.target),"plugin_"+l),t=n.length,s={},a=0;a<t;a++)(s=n[a].data("plugin_"+l)).elementStatus&&s.slideUp(!0)}),e.collapseOnMenuClick||n.on("click."+l,function(e){e.stopPropagation()}),e.expandOnlyOne&&x.on(l+".slideDown",function(e,n){for(var t=C(o,"plugin_"+l),s=t.length,a=!1,i=0;!a&&i<s;)n===t[i].data("plugin_"+l)&&(a=!0),i++;n!==o&&!a&&d.elementStatus&&d.slideUp(!0)}),e.mouse&&(o.on("touchend."+l,function(e){d.mouse=!1}),o.on("mouseenter."+l,function(){d.mouse=!0,d.elementStatus||d.slideDown(!0)}),o.on("mouseleave."+l,function(){d.mouse=!1,d.elementStatus&&d.slideUp(!0)})),s&&(d.dynamicBtnEl="string"==typeof s?t.find(s):t,d.collapseLabel=t.attr(m),d.expandLabel=t.attr(g)),x.trigger(l+".initialised",[d]),f+=1},toggle:function(){var e=this;e.elementStatus?e.slideUp(!0):e.slideDown(!0)},collapse:function(){var e=this,n=e.settings;e.element.removeClass(n.dropdownExpandedClass),e.btn.removeClass(n.btnExpandedClass).attr(t,d),e.menu.removeClass(n.menuExpandedClass).attr(r,c),e.dynamicBtnEl&&e.dynamicBtnEl.text(e.expandLabel),e.elementStatus=!1},expand:function(){var e=this,n=e.settings;e.element.addClass(n.dropdownExpandedClass),e.btn.addClass(n.btnExpandedClass).attr(t,c),e.menu.addClass(n.menuExpandedClass).attr(r,d),e.dynamicBtnEl&&e.dynamicBtnEl.text(e.collapseLabel),e.elementStatus=!0},slideDown:function(e){var n=this,t=e?n.settings.slideSpeed:0;n.settings.cssTransitions||(n.element.css(s,n.settings.expandZIndex),n.menu.stop().slideDown(t,n.settings.easing)),x.trigger(l+".slideDown",[n]),n.expand()},slideUp:function(e){var n=this,t=e?n.settings.slideSpeed:0;n.settings.cssTransitions||(n.element.css(s,n.settings.collapseZIndex),n.menu.stop().slideUp(t,n.settings.easing)),x.trigger(l+".slideUp",[n]),n.collapse()},destroy:function(){var e=this,n=e.settings;e.btn.removeAttr(u).removeAttr(a).removeAttr(t).removeClass(n.btnExpandedClass),e.menu.removeAttr(p).removeAttr(r).removeClass(n.menuExpandedClass).off("click."+l),e.element.removeClass(n.dropdownExpandedClass).off("click."+l+" mouseenter."+l+" mouseleave."+l).removeData("plugin_"+l),x.trigger(l+".destroyed",[e])},methodCaller:function(e){var n=this;switch(e){case"toggle":n.toggle(!0);break;case"slideDown":n.elementStatus||n.slideDown(!0);break;case"slideUp":n.elementStatus&&n.slideUp(!0);break;case"destroy":n.destroy()}}}),i.fn[l]=function(e){return this.each(function(){i.data(this,"plugin_"+l)||"object"!=typeof e&&void 0!==e?"string"==typeof e&&i.data(this,"plugin_"+l).methodCaller(e):i.data(this,"plugin_"+l,new n(this,e))})},i.fn[l].defaultSettings={btnClass:"dropdown__btn",menuClass:"dropdown__menu",dropdownExpandedClass:"dropdown_expanded",btnExpandedClass:"dropdown__btn_expanded",menuExpandedClass:"dropdown__menu_expanded",slideSpeed:300,easing:"swing",collapseOnOutsideClick:!0,collapseOnMenuClick:!1,expandOnlyOne:!0,expandZIndex:10,collapseZIndex:1,cssTransitions:!1,mouse:!1,dynamicBtnLabel:!1}});