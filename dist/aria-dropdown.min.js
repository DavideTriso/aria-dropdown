!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery,window)}(function(e,n){"use strict";var t="ariaDropdown",s="aria-controls",a="aria-hidden",i="aria-owns",d="aria-expanded",o="aria-haspopup",l="z-index",r="true",p="false",u="data-ariadropdown-collapselabel",c="data-ariadropdown-expandlabel",m=0,g=e(n);function f(e,n,t){return e.is("[id]")||e.attr("id",n+t),e.attr("id")}function x(e,n){for(;"BODY"!==e[0].tagName&&void 0===e.data(n);)e=e.parent();for(var t=e.find("*"),s=t.length,a=[],i=0;i<s;i++){var d=t.eq(i);void 0!==d.data(n)&&a.push(d)}return a}function v(n,s){var a=this;a.settings=e.extend({},e.fn[t].defaultSettings,s),a.element=e(n),a.btn=a.element.find("> ."+a.settings.btnClass).first(),a.menu=a.element.find("> ."+a.settings.menuClass).first(),a.elementStatus=!1,a.mouse=!1,a.init()}e.extend(v.prototype,{init:function(){var n=this,d=n.settings,l=n.menu,p=n.btn,v=n.element,C=d.dynamicBtnLabel;n.btnId=f(n.btn,"dropdown__btn--",m),n.menuId=f(n.menu,"dropdown__menu--",m),l.attr(a,r).attr(i,n.btnId),p.attr(o,r).attr(s,n.menuId),n.slideUp(!1),n.settings.collapseOnOutsideClick?g.on("click."+t,function(e){n.elementStatus&&n.slideUp(!0)}):g.on("click."+t,function(){var e=function(e,n){for(var t=[];"BODY"!==e[0].tagName;)(e=e.parent()).data(n)&&t.push(e);return t}(n.element,"plugin_"+t),s=e.length,a=0,i=!1;if(s>0){for(;a<s&&!i;)e[a].data("plugin_"+t).settings.collapseOnOutsideClick&&(i=!0),a++;i&&n.slideUp(!0)}}),v.on("click."+t,function(s){n.mouse||n.toggle(!0),s.stopPropagation();for(var a=x(e(s.target),"plugin_"+t),i=a.length,d={},o=0;o<i;o++)(d=a[o].data("plugin_"+t)).elementStatus&&d.slideUp(!0)}),d.collapseOnMenuClick||l.on("click."+t,function(e){e.stopPropagation()}),d.expandOnlyOne&&g.on(t+".slideDown",function(e,s){for(var a=x(v,"plugin_"+t),i=a.length,d=!1,o=0;!d&&o<i;)s===a[o].data("plugin_"+t)&&(d=!0),o++;s!==v&&!d&&n.elementStatus&&n.slideUp(!0)}),d.mouse&&(v.on("touchend."+t,function(e){n.mouse=!1}),v.on("mouseenter."+t,function(){n.mouse=!0,n.elementStatus||n.slideDown(!0)}),v.on("mouseleave."+t,function(){n.mouse=!1,n.elementStatus&&n.slideUp(!0)})),C&&(n.dynamicBtnEl="string"==typeof C?p.find(C):p,n.collapseLabel=p.attr(u),n.expandLabel=p.attr(c)),g.trigger(t+".initialised",[n]),m+=1},toggle:function(){var e=this;e.elementStatus?e.slideUp(!0):e.slideDown(!0)},collapse:function(){var e=this,n=e.settings;e.element.removeClass(n.dropdownExpandedClass),e.btn.removeClass(n.btnExpandedClass).attr(d,p),e.menu.removeClass(n.menuExpandedClass).attr(a,r),e.dynamicBtnEl&&e.dynamicBtnEl.text(e.expandLabel),e.elementStatus=!1},expand:function(){var e=this,n=e.settings;e.element.addClass(n.dropdownExpandedClass),e.btn.addClass(n.btnExpandedClass).attr(d,r),e.menu.addClass(n.menuExpandedClass).attr(a,p),e.dynamicBtnEl&&e.dynamicBtnEl.text(e.collapseLabel),e.elementStatus=!0},slideDown:function(e){var n=this,s=e?n.settings.slideSpeed:0;n.settings.cssTransitions||(n.element.css(l,n.settings.expandZIndex),n.menu.stop().slideDown(s,n.settings.easing)),g.trigger(t+".slideDown",[n]),n.expand()},slideUp:function(e){var n=this,s=e?n.settings.slideSpeed:0;n.settings.cssTransitions||(n.element.css(l,n.settings.collapseZIndex),n.menu.stop().slideUp(s,n.settings.easing)),g.trigger(t+".slideUp",[n]),n.collapse()},destroy:function(){var e=this,n=e.settings;e.btn.removeAttr(o).removeAttr(s).removeAttr(d).removeClass(n.btnExpandedClass),e.menu.removeAttr(i).removeAttr(a).removeClass(n.menuExpandedClass).off("click."+t),e.element.removeClass(n.dropdownExpandedClass).off("click."+t+" mouseenter."+t+" mouseleave."+t).removeData("plugin_"+t),g.trigger(t+".destroyed",[e])},methodCaller:function(e){var n=this;switch(e){case"toggle":n.toggle(!0);break;case"slideDown":n.elementStatus||n.slideDown(!0);break;case"slideUp":n.elementStatus&&n.slideUp(!0);break;case"destroy":n.destroy()}}}),e.fn[t]=function(n){return this.each(function(){e.data(this,"plugin_"+t)||"object"!=typeof n&&void 0!==n?"string"==typeof n&&e.data(this,"plugin_"+t).methodCaller(n):e.data(this,"plugin_"+t,new v(this,n))})},e.fn[t].defaultSettings={btnClass:"dropdown__btn",menuClass:"dropdown__menu",dropdownExpandedClass:"dropdown_expanded",btnExpandedClass:"dropdown__btn_expanded",menuExpandedClass:"dropdown__menu_expanded",slideSpeed:300,easing:"swing",collapseOnOutsideClick:!0,collapseOnMenuClick:!1,expandOnlyOne:!0,expandZIndex:10,collapseZIndex:1,cssTransitions:!1,mouse:!1,dynamicBtnLabel:!1}});