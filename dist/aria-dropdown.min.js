!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery,window,document)}(function(e,n,t){"use strict";function a(e,n,t){return e.is("[id]")||e.attr("id",n+t),e.attr("id")}function s(e,n){for(var t=[];"BODY"!==e[0].tagName;)(e=e.parent()).data(n)&&t.push(e);return t}function i(e,n){for(;"BODY"!==e[0].tagName&&void 0===e.data(n);)e=e.parent();for(var t=e.find("*"),a=t.length,s=[],i=0;i<a;i++){var d=t.eq(i);void 0!==d.data(n)&&s.push(d)}return s}function d(n,t){var a=this;a.settings=e.extend({},e.fn[o].defaultSettings,t),a.element=e(n),a.btn=a.element.find("> ."+a.settings.btnClass).first(),a.menu=a.element.find("> ."+a.settings.menuClass).first(),a.elementStatus=!1,a.mouse=!1,a.init()}var o="ariaDropdown",l={aCs:"aria-controls",aHi:"aria-hidden",aOw:"aria-owns",aEx:"aria-expanded",aHp:"aria-haspopup",zIn:"z-index",t:"true",f:"false",dCl:"data-ariadropdown-collapselabel",dEl:"data-ariadropdown-expandlabel"},r=0,p=e(n);e.extend(d.prototype,{init:function(){var n=this,t=n.settings,d=n.menu,u=n.btn,c=n.element,m=t.dynamicBtnLabel;n.btnId=a(n.btn,"dropdown__btn--",r),n.menuId=a(n.menu,"dropdown__menu--",r),d.attr(l.aHi,l.t).attr(l.aOw,n.btnId),u.attr(l.aHp,l.t).attr(l.aCs,n.menuId),n.slideUp(!1),e("body").attr("tabindex","-1"),n.settings.collapseOnOutsideClick?p.on("click."+o,function(){n.elementStatus&&n.slideUp(!0)}):p.on("click."+o,function(){var e=s(n.element,"plugin_"+o),t=e.length,a=0,i=!1;if(t>0){for(;a<t&&!i;)e[a].data("plugin_"+o).settings.collapseOnOutsideClick&&(i=!0),a++;i&&n.slideUp(!0)}}),c.on("click."+o,function(t){n.mouse||n.toggle(!0),t.stopPropagation();for(var a=i(e(t.target),"plugin_"+o),s=a.length,d={},l=0;l<s;l++)(d=a[l].data("plugin_"+o)).elementStatus&&d.slideUp(!0)}),t.collapseOnMenuClick||d.on("click."+o,function(e){e.stopPropagation()}),t.expandOnlyOne&&p.on(o+".slideDown",function(e,t){for(var a=i(c,"plugin_"+o),s=a.length,d=!1,l=0;!d&&l<s;)t===a[l].data("plugin_"+o)&&(d=!0),l++;t!==c&&!d&&n.elementStatus&&n.slideUp(!0)}),t.mouse&&(c.on("touchend."+o,function(e){n.mouse=!1}),c.on("mouseenter."+o,function(){n.mouse=!0,n.elementStatus||n.slideDown(!0)}),c.on("mouseleave."+o,function(){n.mouse=!1,n.elementStatus&&n.slideUp(!0)})),m&&(n.dynamicBtnEl="string"==typeof m?u.find(m):u,n.collapseLabel=u.attr(l.dCl),n.expandLabel=u.attr(l.dEl)),p.trigger(o+".initialised",[n]),r+=1},toggle:function(){var e=this;e.elementStatus?e.slideUp(!0):e.slideDown(!0)},collapse:function(){var e=this,n=e.settings;e.element.removeClass(n.dropdownExpandedClass),e.btn.removeClass(n.btnExpandedClass).attr(l.aEx,l.f),e.menu.removeClass(n.menuExpandedClass).attr(l.aHi,l.t),e.dynamicBtnEl&&e.dynamicBtnEl.text(e.expandLabel),e.elementStatus=!1},expand:function(){var e=this,n=e.settings;e.element.addClass(n.dropdownExpandedClass),e.btn.addClass(n.btnExpandedClass).attr(l.aEx,l.t),e.menu.addClass(n.menuExpandedClass).attr(l.aHi,l.f),e.dynamicBtnEl&&e.dynamicBtnEl.text(e.collapseLabel),e.elementStatus=!0},slideDown:function(e){var n=this,t=e?n.settings.slideSpeed:0;n.settings.cssTransitions||(n.element.css(l.zIn,n.settings.expandZIndex),n.menu.stop().slideDown(t,n.settings.easing)),p.trigger(o+".slideDown",[n]),n.expand()},slideUp:function(e){var n=this,t=e?n.settings.slideSpeed:0;n.settings.cssTransitions||(n.element.css(l.zIn,n.settings.collapseZIndex),n.menu.stop().slideUp(t,n.settings.easing)),p.trigger(o+".slideUp",[n]),n.collapse()},destroy:function(){var e=this,n=e.settings;e.btn.removeAttr(l.aHp).removeAttr(l.aCs).removeAttr(l.aEx).removeClass(n.btnExpandedClass),e.menu.removeAttr(l.aOw).removeAttr(l.aHi).removeClass(n.menuExpandedClass).off("click."+o),e.element.removeClass(n.dropdownExpandedClass).off("click."+o+" mouseenter."+o+" mouseleave."+o).removeData("plugin_"+o),p.trigger(o+".destroyed",[e])},methodCaller:function(e){var n=this;switch(e){case"toggle":n.toggle(!0);break;case"slideDown":n.elementStatus||n.slideDown(!0);break;case"slideUp":n.elementStatus&&n.slideUp(!0);break;case"destroy":n.destroy()}}}),e.fn[o]=function(n){return this.each(function(){var t=this;e.data(t,"plugin_"+o)||"object"!=typeof n&&void 0!==n?"string"==typeof n&&e.data(t,"plugin_"+o).methodCaller(n):e.data(t,"plugin_"+o,new d(t,n))})},e.fn[o].defaultSettings={btnClass:"dropdown__btn",menuClass:"dropdown__menu",dropdownExpandedClass:"dropdown_expanded",btnExpandedClass:"dropdown__btn_expanded",menuExpandedClass:"dropdown__menu_expanded",slideSpeed:300,easing:"swing",collapseOnOutsideClick:!0,collapseOnMenuClick:!1,expandOnlyOne:!0,expandZIndex:10,collapseZIndex:1,cssTransitions:!1,mouse:!1,dynamicBtnLabel:!1}});